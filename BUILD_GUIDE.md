# TechDaily ç¼–è¯‘è„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“¦ ç¼–è¯‘è„šæœ¬æ¦‚è§ˆ

æœ¬é¡¹ç›®æä¾›äº†ä¸¤ä¸ªç¼–è¯‘è„šæœ¬ï¼Œæ»¡è¶³ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š

### 1. `./quick-build.sh` - å¿«é€Ÿç¼–è¯‘è„šæœ¬
- **ç”¨é€”**ï¼šå¼€å‘ç¯å¢ƒå¿«é€Ÿç¼–è¯‘æµ‹è¯•
- **åŠŸèƒ½**ï¼šç¼–è¯‘å‰ç«¯+åç«¯ï¼Œæ›´æ–°éƒ¨ç½²åŒ…ä¸­çš„jaræ–‡ä»¶
- **ç‰¹ç‚¹**ï¼šå¿«é€Ÿã€è½»é‡ï¼Œé€‚åˆé¢‘ç¹ç¼–è¯‘æµ‹è¯•
- **è¾“å‡º**ï¼šåªæ›´æ–° `deploy-package/techdaily.jar`

### 2. `./build-deploy.sh` - å®Œæ•´ç¼–è¯‘éƒ¨ç½²è„šæœ¬  
- **ç”¨é€”**ï¼šç”Ÿäº§ç¯å¢ƒå®Œæ•´éƒ¨ç½²åŒ…æ„å»º
- **åŠŸèƒ½**ï¼šå®Œæ•´ç¼–è¯‘ï¼Œç”Ÿæˆæ‰€æœ‰éƒ¨ç½²æ–‡ä»¶å’Œè„šæœ¬
- **ç‰¹ç‚¹**ï¼šå…¨é¢ã€å®Œæ•´ï¼Œé€‚åˆæ­£å¼å‘å¸ƒ
- **è¾“å‡º**ï¼šå®Œæ•´çš„éƒ¨ç½²åŒ…ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### å¼€å‘ç¯å¢ƒå¿«é€Ÿç¼–è¯‘
```bash
# å¿«é€Ÿç¼–è¯‘å‰ç«¯+åç«¯
./quick-build.sh

# ç„¶åå¯ä»¥ç›´æ¥åœ¨ deploy-package ç›®å½•å¯åŠ¨æµ‹è¯•
cd deploy-package
./restart.sh
```

### ç”Ÿäº§ç¯å¢ƒå®Œæ•´æ„å»º
```bash
# ç”Ÿæˆå®Œæ•´éƒ¨ç½²åŒ…
./build-deploy.sh

# éƒ¨ç½²åŒ…å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥ä¼ è¾“åˆ°æœåŠ¡å™¨
cd deploy-package
tar -czf techdaily-deploy.tar.gz *
```

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### å¿…éœ€å·¥å…·
- **Java 8+**ï¼šåç«¯ç¼–è¯‘è¿è¡Œç¯å¢ƒ
- **Maven 3.6+**ï¼šåç«¯æ„å»ºå·¥å…·
- **Node.js 14+**ï¼šå‰ç«¯ç¼–è¯‘ç¯å¢ƒ (å¦‚æœæœ‰å‰ç«¯é¡¹ç›®)
- **npm**ï¼šå‰ç«¯åŒ…ç®¡ç†å™¨

### æ£€æŸ¥ç¯å¢ƒ
```bash
# æ£€æŸ¥Javaç‰ˆæœ¬
java -version

# æ£€æŸ¥Mavenç‰ˆæœ¬
mvn -version

# æ£€æŸ¥Node.jsç‰ˆæœ¬ (å¦‚æœæœ‰å‰ç«¯)
node -version

# æ£€æŸ¥npmç‰ˆæœ¬ (å¦‚æœæœ‰å‰ç«¯)
npm -version
```

## ğŸ”§ è„šæœ¬è¯¦ç»†è¯´æ˜

### quick-build.sh åŠŸèƒ½
1. **å‰ç«¯ç¼–è¯‘**ï¼š
   - æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
   - æ‰§è¡Œ `npm run build`
   - å¤åˆ¶æ„å»ºç»“æœåˆ°åç«¯é™æ€èµ„æºç›®å½•
   
2. **åç«¯ç¼–è¯‘**ï¼š
   - æ‰§è¡Œ `mvn clean compile package -DskipTests`
   - å¤åˆ¶jaræ–‡ä»¶åˆ°éƒ¨ç½²ç›®å½•

### build-deploy.sh åŠŸèƒ½
1. **ç¯å¢ƒæ£€æŸ¥**ï¼šéªŒè¯å¿…è¦å·¥å…·æ˜¯å¦å®‰è£…
2. **å‰ç«¯ç¼–è¯‘**ï¼šå®Œæ•´å‰ç«¯æ„å»ºæµç¨‹
3. **åç«¯ç¼–è¯‘**ï¼šå®Œæ•´åç«¯æ„å»ºæµç¨‹
4. **æ–‡ä»¶å¤åˆ¶**ï¼šå¤åˆ¶æ‰€æœ‰å¿…è¦çš„é…ç½®æ–‡ä»¶
5. **è„šæœ¬ç”Ÿæˆ**ï¼šç”Ÿæˆå¯åŠ¨ã€åœæ­¢ã€é‡å¯è„šæœ¬
6. **æ–‡æ¡£ç”Ÿæˆ**ï¼šç”Ÿæˆç‰ˆæœ¬ä¿¡æ¯å’Œéƒ¨ç½²æ–‡æ¡£

## ğŸ“ è¾“å‡ºç»“æ„

### quick-build.sh è¾“å‡º
```
deploy-package/
â”œâ”€â”€ techdaily.jar          # â† æ›´æ–°çš„jaræ–‡ä»¶
â””â”€â”€ ... (å…¶ä»–æ–‡ä»¶ä¿æŒä¸å˜)
```

### build-deploy.sh è¾“å‡º  
```
deploy-package/
â”œâ”€â”€ techdaily.jar          # åº”ç”¨ç¨‹åº
â”œâ”€â”€ start.sh              # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop.sh               # åœæ­¢è„šæœ¬
â”œâ”€â”€ restart.sh            # é‡å¯è„šæœ¬
â”œâ”€â”€ application-prod.yml   # ç”Ÿäº§é…ç½®
â”œâ”€â”€ init.sql              # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ logback-spring.xml    # æ—¥å¿—é…ç½®
â”œâ”€â”€ VERSION.txt           # ç‰ˆæœ¬ä¿¡æ¯
â”œâ”€â”€ DEPLOY_README.md      # éƒ¨ç½²è¯´æ˜
â”œâ”€â”€ env.example           # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ static/               # é™æ€èµ„æº
```

## âš¡ æœ€ä½³å®è·µ

### å¼€å‘æœŸé—´
```bash
# å¿«é€Ÿç¼–è¯‘æµ‹è¯•
./quick-build.sh

# å¯åŠ¨åº”ç”¨æµ‹è¯•
cd deploy-package && ./restart.sh

# æŸ¥çœ‹æ—¥å¿—
tail -f deploy-package/app.log
```

### å‘å¸ƒå‡†å¤‡
```bash
# å®Œæ•´æ„å»º
./build-deploy.sh

# æ£€æŸ¥æ„å»ºç»“æœ
ls -la deploy-package/

# åˆ›å»ºå‘å¸ƒåŒ…
cd deploy-package
tar -czf ../techdaily-v$(date +%Y%m%d).tar.gz *
```

### æŒç»­é›†æˆ
```bash
# CI/CD è„šæœ¬ä¸­ä½¿ç”¨
#!/bin/bash
set -e

# å®Œæ•´æ„å»º
./build-deploy.sh

# è¿è¡Œæµ‹è¯•
cd deploy-package
./start.sh
sleep 30

# å¥åº·æ£€æŸ¥
curl -f http://localhost:8080/actuator/health

# æ¸…ç†
./stop.sh
```

## ğŸ” æ•…éšœæ’æŸ¥

### ç¼–è¯‘å¤±è´¥
1. **æ£€æŸ¥ç¯å¢ƒ**ï¼šç¡®è®¤ Javaã€Mavenã€Node.js ç‰ˆæœ¬
2. **æ¸…ç†ç¼“å­˜**ï¼šåˆ é™¤ `backend/target` å’Œ `frontend/node_modules`
3. **ç½‘ç»œé—®é¢˜**ï¼šæ£€æŸ¥ Maven å’Œ npm ä»“åº“è¿æ¥

### å‰ç«¯ç¼–è¯‘å¤±è´¥
```bash
# æ¸…ç†å‰ç«¯ç¼“å­˜
cd frontend
rm -rf node_modules package-lock.json
npm install
npm run build
```

### åç«¯ç¼–è¯‘å¤±è´¥
```bash
# æ¸…ç†Mavenç¼“å­˜
cd backend
mvn clean
mvn dependency:resolve
mvn compile
```

## ğŸ“ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹JVMå‚æ•°
ç¼–è¾‘ `build-deploy.sh` ä¸­çš„å¯åŠ¨è„šæœ¬ç”Ÿæˆéƒ¨åˆ†ï¼š
```bash
JVM_OPTS="-Xmx2048m -Xms1024m"  # è°ƒæ•´å†…å­˜é…ç½®
```

### ä¿®æ”¹æ„å»ºç›®æ ‡
ç¼–è¾‘è„šæœ¬ä¸­çš„ç›®å½•å˜é‡ï¼š
```bash
DEPLOY_DIR="$PROJECT_ROOT/my-deploy"  # è‡ªå®šä¹‰éƒ¨ç½²ç›®å½•
```

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

1. **é¦–æ¬¡ä½¿ç”¨**ï¼š
   ```bash
   # å…‹éš†é¡¹ç›®åï¼Œé¦–æ¬¡å®Œæ•´æ„å»º
   ./build-deploy.sh
   ```

2. **æ—¥å¸¸å¼€å‘**ï¼š
   ```bash
   # ä¿®æ”¹ä»£ç åå¿«é€Ÿç¼–è¯‘
   ./quick-build.sh
   ```

3. **ç”Ÿäº§éƒ¨ç½²**ï¼š
   ```bash
   # ç”Ÿæˆéƒ¨ç½²åŒ…
   ./build-deploy.sh
   
   # ä¼ è¾“åˆ°æœåŠ¡å™¨
   scp -r deploy-package/ user@server:/path/to/deploy/
   ```

ç°åœ¨æ‚¨å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„ç¼–è¯‘è„šæœ¬è¿›è¡Œå¼€å‘å’Œéƒ¨ç½²äº†ï¼ 